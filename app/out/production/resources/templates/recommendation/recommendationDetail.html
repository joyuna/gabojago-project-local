<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>recommendation</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <link rel="stylesheet" href="../css/main-base.css" />
    <link rel="stylesheet" href="../css/main-modal.css" />
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="../css/recommendation/recommendationDetail.css" />
    <link
        rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    />
</head>
<body>
<div class="modal">
    <div class="modal_body">
        <h2>Sign In</h2>
        <form action="/app/auth/login" method="post">
            <p>ID</p>
            <input name="id" type="text" size="30" placeholder="ID를 입력해주세요." th:value="${id}">

            <p>Password</p>
            <input name="password" type="password" size="20" placeholder="Password를 입력해주세요.">
            <br>
            <button class="btn_login" type="submit">Login</button>



            <!--          <a href="http://localhost:9999/app/">구글 아이디로 로그인</a>-->

            <div class="g-signin2" data-onsuccess="onSignIn"></div>

            <script>
            function onSignIn(googleUser) {
              var profile = googleUser.getBasicProfile();
              console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
              console.log('Name: ' + profile.getName());
              console.log('Image URL: ' + profile.getImageUrl());
              console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
            }

          </script>

            <!-- <a href="#" onClick="signOut();">Sign out</a>-->
            <script>
            function signOut() {
              var auth2 = gapi.auth2.getAuthInstance();
              auth2.signOut().then(function () {
                console.log('User signed out.');
              });
            }
          </script>



            <div class="savecheck">
                <input id="savecheckbox" type="checkbox" name="saveEmail"><label for="savecheckbox">&nbsp;ID 저장</label>
                <span><a href="#">ID 찾기</a></span><span> / </span><span><a href="#">Password 찾기</a></span>
            </div>
        </form>

        <!--
        <div class="loginimages">
          <ul>
            <li>

              <a href="#">
                <img src="./images/googlebtn.png" alt="google login button">
              </a>

            </li>
            <li>
              <a href="#">
                <img src="./images/naverbtn.png" alt="naver login button">
              </a>
            </li>
          </ul>
        </div>
         -->

        <form action="/app/auth/register">
            <button class="btn_signin" type="submit">회원가입</button>
        </form>

    </div>
</div>

<!-- Navigation 사실상의 header -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
        <a class="navbar-brand" href="/app">가보자GO</a>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/etc"
                    >홈
                        <span class="sr-only">(current)</span>
                    </a>
                </li>
                <li class="nav-item"><a class="nav-link" href="#">Search</a></li>
                <li class="nav-item">
                    <a class="nav-link" href="/app/recommendation/recommendationList"
                    >코스추천</a
                    >
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/app/exhibition/exhibitionlist">전시회</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/app/support/">고객지원</a>
                </li>
                <li class="nav-item" th:if="${session.loginMember != null}">
                    <a
                        class="nav-link"
                        href="/app/auth/logout"
                        th:text="${session.loginMember.name}+'(로그아웃)'"
                    >홍길동(로그아웃)</a
                    >
                </li>
                <li class="nav-item" th:if="${session.loginMember == null}">
                    <span class="nav-link btn-open-popup">로그인</span>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="#">
                        <img src="/app/images/mypage.png" width="90%" height="25"
                        /></a>
                </li>

                <!--테스트 중-->

                <li><a href="member/list">회원</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="ga-content-detail">
    <div class="ga-selectbtn">
        <button><a href="recommendationList">목록</a></button>
        <button><a href="recommendationUpdateForm?recono=${recommendation.recono}"
                   data-th-href="@{recommendationUpdateForm(recono=${recommendation.recono})}">수정</a></button>
        <button><a href="disableRecommend?recono=${recommendation.recono}"
                   data-th-href="@{disableRecommend(recono=${recommendation.recono})}">삭제</a></button>
    </div>

    <div class="ga-reco-info1">
        <h2 data-th-text="${recommendation.title == ''} ? '(제목없음)' : ${recommendation.title}">먹깨비가 간다!</h2>
        <h3 data-th-text="${recommendation.writer.nickName} +' 님'">초밥킬러 님</h3>
        <h4 data-th-text="${recommendation.wdate}">2022-09-09</h3>
    </div>

    <span class="ga-reco-plusdata">>> 추가정보</span>
    <div class="ga-reco-info2">
        <span data-th-text="'조회수: ' + ${recommendation.cnt}">조회수: 342</span>
    </div>

    <div class="ga-reco-info3">
        <h5 data-th-text="'작성자가 추천하는 이동수단: ' + ${recommendation.tpname}">작성자가 추천하는 이동수단: 대중교통</h5>
        <h5 data-th-if="${recommendation.pet == true}">애완동물 동행이 가능합니다.</h5>
        <h5 data-th-if="${recommendation.frd == true}">친구와 함께 하기 좋아요.</h5>
        <h5 data-th-if="${recommendation.cple == true}">연인과 함께 하기 좋아요.</h5>
        <h5 data-th-if="${recommendation.fmly == true}">가족과 함께 하기 좋아요.</h5>
        <h5 data-th-if="${recommendation.solo == true}">혼자 가도 좋아요.</h5>
    </div>

    <div data-th-each="jangSoReview : ${jangSoReviews}">
        <div class="ga-review">
            <ul class="ga-review-img-ul">
                <li class="ga-review-img-li" data-th-each="file : ${jangSoReview.attachedFiles}">
                    <img class="ga-review-img" src="석촌3.jpeg" data-th-src="@{'../board/files/' + ${file.filepath}}" alt="리뷰 그림 파일"/>
                </li>
            </ul>
            <textarea class="ga-review-cont" data-th-text="${jangSoReview.cont}" readonly>하늘정원이 예뻤어요</textarea>
            <div class="ga-review-adrs">
                <span data-th-text="${jangSoReview.plname} + ', '">롯데월드</span>
                <span data-th-text="${jangSoReview.adrs}">서울 송파구 올림픽로 240</span>
            </div>
        </div>
        <hr class="ga-review-horizon">
    </div>

    <br />
    <!-- 댓글 입력 폼 -->
    <div class="ga-jang-comment-write">

        <form action='jangCommentInsert' method="post" enctype="multipart/form-data">
            <span class="ga-comment-write-title">[ 댓글 작성 ]</span>
            <div class="ga-comment-write-inputbox">
                <textarea class="ga-comment-write-input" type='text' name='cont' placeholder="댓글을 작성해 주세요."></textarea>
            </div>
            <input type='hidden' name='recono' data-th-value="${recommendation.recono}">
            <button class="ga-comment-write-btn" type='submit'>등록</button>
        </form>
    </div>
    <!-- 댓글 리스트 -->
    <div class="ga-jang-comment">
        <table class="ga-comment-list">
            <tr>
                <th>댓글번호</th>
                <th>아이디</th>
                <th>내용</th>
                <th>작성일</th>
                <th></th>
            </tr>

            <tr data-th-each="jangComment : ${jangComments}">
                <td class="ga-comment-list-num" name="cmno" type="number" value="1" data-th-text="${jangComment.cmno}" readonly>댓글 번호</td>
                <td class="ga-comment-list-id" data-th-text="${jangComment.writer.nickName}">홍길동</td>
                <td class="ga-comment-list-cont" data-th-text="${jangComment.cont == ''} ? '(내용없음)' : ${jangComment.cont}">
                    <input name="cont" type="text" value="empty" data-th-value="${jangComment.cont}" size="30"/>
                </td>
                <!--readonly-->
                <td class="ga-comment-list-date" data-th-text="${jangComment.wdate}">2022-1-1</td>
                <td class="ga-comment-list-delete"><a href="jangCommentDelete?cmno=1"
                    data-th-href="@{/recommendation/jangCommentDelete(cmno=${jangComment.cmno})}">삭제</a></td>
            </tr>
        </table>
    </div>
</div> <!-- main content 끝 -->

    <!-- Footer-->
    <footer class="py-4 bg-dark">
        <div class="container">
            <p class="m-0 text-center text-white">Copyright &copy;가보자GO</p>
        </div>
    </footer>

    <!--login modal script-->
    <script>
      const body = document.querySelector("body");
      const modal = document.querySelector(".modal");
      const btnOpenPopup = document.querySelector(".btn-open-popup");

      btnOpenPopup.addEventListener("click", () => {
        modal.classList.toggle("show");

        if (modal.classList.contains("show")) {
          body.style.overflow = "hidden";
        }
      });

      modal.addEventListener("click", (event) => {
        if (event.target === modal) {
          modal.classList.toggle("show");

          if (!modal.classList.contains("show")) {
            body.style.overflow = "auto";
          }
        }
      });
    </script>

</body>
</html>
